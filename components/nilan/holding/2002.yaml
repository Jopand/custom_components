text_sensor:
  - platform: modbus_controller
    modbus_controller_id: nilan_modbus_controller
    name: "User menu open"
    id: nilan_user_menu_open
    register_type: holding
    address: 2002
    lambda: !lambda |-
      uint16_t menuState = (data[item->offset] << 8) + data[item->offset+1];
      ESP_LOGD("main","Parsed menu state: %d", menuState);

      switch(menuState) {
        case 0: return esphome::optional<std::string>("0 : Closed");
        case 1: return esphome::optional<std::string>("1 : Open");
        case 2: return esphome::optional<std::string>("2 : No OFF key");
        default: return esphome::optional<std::string>("");
      }